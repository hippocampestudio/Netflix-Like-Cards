document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("netflix-lightbox"),t=document.getElementById("lightbox-content"),n=document.querySelector(".close-lightbox");if(!e||!t||!n)return;function o(){e.classList.remove("active"),document.body.classList.remove("lightbox-open")}const r=document.querySelectorAll(".netflix-card");0!==r.length&&(r.forEach((n=>{n.addEventListener("click",(o=>{o.preventDefault();const r=n.getAttribute("href");r&&fetch(r).then((e=>e.text())).then((n=>{const o=(new DOMParser).parseFromString(n,"text/html"),r=o.querySelector("h1"),c=o.querySelector(".entry-content"),i=o.querySelector(".wp-post-image"),l=o.querySelector(".prestations");l&&(c.querySelectorAll(".prestations").forEach((e=>e.remove())),l.querySelectorAll("a").forEach((e=>{newNode=document.createElement("span"),newNode.classList.add("prestation"),newNode.innerHTML=e.text,e.replaceWith(newNode)})),c.appendChild(l));const d=r?r.innerHTML:__("Titre non disponible","netflix-like-cards"),s=c?c.innerHTML:__("Contenu non disponible","netflix-like-cards"),a=i?i.src:"";t.innerHTML=`\n                        <div class="lightbox-header" style="background-image: url('${a}');">\n                            <h1>${d}</h1>\n                        </div>\n                        <div class="lightbox-body">${s}</div>\n                    `,e.classList.add("active"),document.body.classList.add("lightbox-open")})).catch((e=>{console.error("Erreur lors du chargement du contenu pour la lightbox:",e)}))}))})),n.addEventListener("click",o),e.addEventListener("click",(t=>{t.target===e&&o()})),document.addEventListener("keydown",(t=>{"Escape"===t.key&&e.classList.contains("active")&&o()})))}));