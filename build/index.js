(()=>{var e,t={227:()=>{document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("netflix-lightbox"),t=document.getElementById("lightbox-content"),l=document.querySelector(".close-lightbox");if(!e||!t||!l)return;function i(){e.classList.remove("active"),document.body.classList.remove("lightbox-open")}const r=document.querySelectorAll(".netflix-card");0!==r.length&&(r.forEach((l=>{l.addEventListener("click",(i=>{i.preventDefault();const r=l.getAttribute("href");r&&fetch(r).then((e=>e.text())).then((l=>{const i=(new DOMParser).parseFromString(l,"text/html"),r=i.querySelector("h1"),s=i.querySelector(".entry-content"),n=i.querySelector(".wp-post-image"),a=r?r.innerHTML:__("Titre non disponible","netflix-like-cards"),o=s?s.innerHTML:__("Contenu non disponible","netflix-like-cards"),c=n?n.src:"";t.innerHTML=`\n                        <div class="lightbox-header" style="background-image: url('${c}');">\n                            <h1>${a}</h1>\n                        </div>\n                        <div class="lightbox-body">${o}</div>\n                    `,e.classList.add("active"),document.body.classList.add("lightbox-open")})).catch((e=>{console.error("Erreur lors du chargement du contenu pour la lightbox:",e)}))}))})),l.addEventListener("click",i),e.addEventListener("click",(t=>{t.target===e&&i()})),document.addEventListener("keydown",(t=>{"Escape"===t.key&&e.classList.contains("active")&&i()})))}))},607:(e,t,l)=>{"use strict";const i=window.wp.blocks,r=window.wp.blockEditor,s=window.wp.components,n=window.wp.i18n,a=window.wp.element,o=window.wp.data,c=window.wp.coreData,d=window.ReactJSXRuntime;(0,i.registerBlockType)("create-block/netflix-card",{title:"Netflix Like Card",icon:"format-image",parent:["create-block/netflix-like-cards"],attributes:{title:{type:"string",source:"html",selector:"h3"},description:{type:"string",source:"html",selector:"p"},imageUrl:{type:"string"},linkPostUrl:{type:"string",default:""}},edit:function({attributes:e,setAttributes:t}){const{title:l,description:i,imageUrl:a,linkPostUrl:u}=e,h=(0,r.useBlockProps)(),x=(0,o.useSelect)((e=>{const{getPostTypes:t,getEntityRecords:l}=e(c.store);return(t({per_page:-1})?.filter((({viewable:e,slug:t})=>e&&!["attachment","wp_block"].includes(t)))||[]).flatMap((e=>l("postType",e.slug,{per_page:-1,_fields:"id,title,type,link"})||[]))}),[]).map((e=>({value:e.link,label:`${e.title.rendered} (${e.type})`})));return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(r.InspectorControls,{children:(0,d.jsxs)(s.PanelBody,{title:(0,n.__)("Réglage de la carte","netflix-like-cards"),children:[(0,d.jsxs)("fieldset",{children:[(0,d.jsx)("h2",{className:"blocks-base-control__label",children:(0,n.__)("Titre","netflix-like-cards")}),(0,d.jsx)(r.RichText,{tagName:"h2",value:l,onChange:e=>t({title:e}),placeholder:(0,n.__)("Titre de la carte","netflix-like-cards")})]}),(0,d.jsxs)("fieldset",{children:[(0,d.jsx)("h2",{className:"blocks-base-control__label",children:(0,n.__)("Description","netflix-like-cards")}),(0,d.jsx)(r.RichText,{tagName:"p",value:i,onChange:e=>t({description:e}),placeholder:(0,n.__)("Description de la carte","netflix-like-cards")})]}),(0,d.jsxs)("fieldset",{children:[(0,d.jsx)("h2",{className:"blocks-base-control__label",children:(0,n.__)("Image","netflix-like-cards")}),(0,d.jsx)(r.MediaUpload,{onSelect:e=>t({imageUrl:e.url}),allowedTypes:["image"],value:a,render:({open:e})=>(0,d.jsx)(s.Button,{onClick:e,isLarge:!0,isPrimary:!0,children:a?(0,n.__)("Remplacer l'image","netflix-like-cards"):(0,n.__)("Choisir une image","netflix-like-cards")})})]}),(0,d.jsxs)("fieldset",{children:[(0,d.jsx)("h2",{className:"blocks-base-control__label",children:(0,n.__)("Lien","netflix-like-cards")}),(0,d.jsx)(s.ComboboxControl,{__nextHasNoMarginBottom:!0,value:u,onChange:e=>t({linkPostUrl:e}),options:x,onFilterValueChange:e=>x.filter((t=>t.label.toLowerCase().includes(e.toLowerCase())))})]})]})}),(0,d.jsx)("div",{...h,children:(0,d.jsxs)("div",{className:"netflix-card",children:[a&&(0,d.jsx)("img",{src:a,alt:l}),(0,d.jsxs)("div",{className:"netflix-card-content",children:[(0,d.jsx)("h3",{children:l}),(0,d.jsx)(r.RichText.Content,{tagName:"p",value:i})]})]})})]})},save:function({attributes:e}){const{title:t,description:l,imageUrl:i,linkPostUrl:s}=e,n=r.useBlockProps.save();return(0,d.jsx)("div",{...n,children:(0,d.jsxs)("a",{href:s,className:"netflix-card",children:[i&&(0,d.jsx)("img",{src:i,alt:t}),(0,d.jsxs)("div",{className:"netflix-card-content",children:[(0,d.jsx)("h3",{children:t}),(0,d.jsx)(r.RichText.Content,{tagName:"p",value:l})]})]})})}}),l(227),(0,i.registerBlockType)("create-block/netflix-like-cards",{title:"Netflix-Like Cards",icon:"format-gallery",category:"hippocampe-studio",attributes:{carouselTitle:{type:"string",default:""}},edit:function({attributes:e,setAttributes:t}){const l=(0,r.useBlockProps)(),i=(0,a.useRef)(null),{carouselTitle:o}=e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(r.InspectorControls,{children:(0,d.jsx)(s.PanelBody,{title:(0,n.__)("Réglages du carousel","netflix-like-cards"),children:(0,d.jsx)(s.TextControl,{__nextHasNoMarginBottom:!0,label:(0,n.__)("Titre du carousel","netflix-like-cards"),value:o,onChange:e=>t({carouselTitle:e})})})}),(0,d.jsxs)("div",{...l,children:[o&&(0,d.jsx)("h2",{className:"netflix-like-carousel-title",children:o}),(0,d.jsx)("div",{className:"netflix-like-carousel",ref:i,children:(0,d.jsx)(r.InnerBlocks,{allowedBlocks:["create-block/netflix-card"],orientation:"horizontal",renderAppender:()=>(0,d.jsx)(r.InnerBlocks.ButtonBlockAppender,{})})})]})]})},save:function({attributes:e}){const t=r.useBlockProps.save(),{carouselTitle:l}=e;return(0,d.jsxs)("div",{...t,children:[l&&(0,d.jsx)("h2",{className:"netflix-like-carousel-title",children:l}),(0,d.jsx)("div",{className:"netflix-like-carousel",children:(0,d.jsx)(r.InnerBlocks.Content,{})}),(0,d.jsx)("button",{className:"carousel-arrow left dashicons dashicons-arrow-left-alt2"}),(0,d.jsx)("button",{className:"carousel-arrow right dashicons dashicons-arrow-right-alt2"})]})}})}},l={};function i(e){var r=l[e];if(void 0!==r)return r.exports;var s=l[e]={exports:{}};return t[e](s,s.exports,i),s.exports}i.m=t,e=[],i.O=(t,l,r,s)=>{if(!l){var n=1/0;for(d=0;d<e.length;d++){for(var[l,r,s]=e[d],a=!0,o=0;o<l.length;o++)(!1&s||n>=s)&&Object.keys(i.O).every((e=>i.O[e](l[o])))?l.splice(o--,1):(a=!1,s<n&&(n=s));if(a){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[l,r,s]},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,216:0,350:0};i.O.j=t=>0===e[t];var t=(t,l)=>{var r,s,[n,a,o]=l,c=0;if(n.some((t=>0!==e[t]))){for(r in a)i.o(a,r)&&(i.m[r]=a[r]);if(o)var d=o(i)}for(t&&t(l);c<n.length;c++)s=n[c],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(d)},l=globalThis.webpackChunknetflix_like_cards=globalThis.webpackChunknetflix_like_cards||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var r=i.O(void 0,[350],(()=>i(607)));r=i.O(r)})();